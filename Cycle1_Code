***************************************************************************************************************************************************
*To test code you can copy and paste everything below to display at once.* 
***************************************************************************************************************************************************


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
    
  <title>Chronology Timeline</title>
  <style type="text/css">
    body, html, input 
    {
      font-family: sans-serif;
      font-size: 12pt;
    }
    .visualization 
    {
      position: absolute;
    }
   menu 
   {
      position: absolute;
      top: 0;
      right: 0;
      margin: 10px;
      z-index: 9999;
   }    
  </style>

</head>

<body>
  <div id="visualization">
    <div id="chronology_timeline">
    </div>
    <div class="menu">
      <input type="button" id="zoomIn" value="Zoom in" />
      <input type="button" id="zoomOut" value="Zoom out" />
      <input type="button" id="moveLeft" value="Move left" />
      <input type="button" id="moveRight" value="Move right" />
      <input type="button" onclick="myFunction()" value="Search"><input type="text" name="lname">
    </div> 
  </div>


    <script type="text/javascript">

          var timeline
          const timeLineObjects = [];
          var numberOfElementsToDisplay = 250;
          var elementPeekLength = 30;
		  var search = false;          
         

          getText("https://georgeeliotarchive.org/api/items?collection=45");


          async function getText(file) 
          {
			//if(localStorage.getItem("GE_Chronology_timeline") == null)
			//{
             let myObject = await fetch(file);
             let myText = await myObject.text();
			 //localStorage.setItem("GE_Chronology_timeline",myText);
			//}
			
			 //let timeline = localStorage.getItem("GE_Chronology_timeline");
             let json_data = JSON.parse(myText);
             var length = json_data.length-1;
			 var element_display_count = length-numberOfElementsToDisplay;

			  for(var i = length; i>(element_display_count); i--)
              {  
              var content = json_data[i].element_texts[5].text;
			  var start = json_data[i].element_texts[0].text;             
			  
              //Create a timeLineEvent object
			    if (search == true & content.includes("Cross"))
			    {
                  var object = new timeLineEvent((length+1)-i,content,start);              
                  timeLineObjects.push(object);
                }
                else if (search == false)
                {
                  var object = new timeLineEvent((length+1)-i,content,start);  timeLineObjects.push(object);              
                }
              }
    
              var container = document.getElementById('chronology_timeline');  // DOM element where the Timeline will be attached
              var items = new vis.DataSet(timeLineObjects);
              var options = {maxHeight: 600,height: 300};// Configuration for the Timeline 
              timeline = new vis.Timeline(container, items, options); // Create a Timeline
           }


          // Constructor function for timeLineEvent objects
          function timeLineEvent(tle_id, tle_content, tle_start, search) 
          {
            let str = '';
            let rowLength = 60
            let lines = ((tle_content.length)/rowLength);
 
            for(let i = 0; i<lines; i++)
            {
                var rowStart = i*rowLength;
                var rowEnd = (i+1)*rowLength;
                str = str + tle_content.slice(rowStart,rowEnd)+'<br>';
            } 
          
            this.id = tle_id;
            this.content = tle_content.slice(0,elementPeekLength)+'...'; //display the first [elementPeekLength] chracters in each element
            this.start = tle_start;
            //this.end = tle_start + "T12:00:00"; //uncomment for element to last only 24hrs
            this.title = str;
          }	 

          
          //Move timeline a set [percentage] to left or right. EXAMPLE: 0.1 (left) or -0.1 (right)
          function move(percentage) 
          {
             var range = timeline.getWindow();
             var interval = range.end - range.start;
             timeline.setWindow({start: range.start.valueOf() - interval * percentage,end: range.end.valueOf() - interval * percentage,});
          }

          // attach events to the navigation buttons
          document.getElementById("zoomIn").onclick = function () 
          {
             timeline.zoomIn(0.9);
          };
          document.getElementById("zoomOut").onclick = function () 
          {
             timeline.zoomOut(0.9);
          };
          document.getElementById("moveLeft").onclick = function () 
          {
             move(0.9);
          };
          document.getElementById("moveRight").onclick = function () 
          {
             move(-0.9);
          };


          
    </script>
</body>
</html>
